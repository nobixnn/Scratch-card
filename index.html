<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>King Rewards - Scratch & Win</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

    :root {
      --primary-color: #00e0ff;
      --secondary-color: #ff00f7;
      --accent-color: #00ff9d;
      --success-color: #00c853;
      --dark-bg: #0a0f1f;
      --card-bg: rgba(20, 20, 40, 0.95);
      --text-light: #fff;
      --border-color: rgba(0, 224, 255, 0.4);
    }

    * {margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

    body {
      background: radial-gradient(circle at top, #1a0033, #000814);
      color: var(--text-light);
      display: flex;justify-content:center;align-items:flex-start;
      min-height:100vh;padding:30px 10px;
      overflow-x:hidden;position:relative;
    }

    body::before {
      content:"";
      position:fixed;top:0;left:0;width:100%;height:100%;
      background: conic-gradient(from 180deg at 50% 50%, #ff00f7, #00e0ff, #00ff9d, #ff00f7);
      filter: blur(160px) opacity(0.25);
      animation: aurora 12s infinite linear;
      z-index:-1;
    }
    @keyframes aurora {to{transform:rotate(360deg)}}

    .container {z-index:1;width:100%;max-width:400px;text-align:center;}

    .page {
      display:none;flex-direction:column;align-items:center;
      background:var(--card-bg);padding:25px;border-radius:20px;
      box-shadow:0 0 40px rgba(0,224,255,0.25);
      border:2px solid var(--border-color);
      animation: fadeIn 0.8s forwards;
    }
    .page.active {display:flex;}
    @keyframes fadeIn {
      from{opacity:0;transform:translateY(40px) scale(0.95);}
      to{opacity:1;transform:translateY(0) scale(1);}
    }

    h1 {font-size:2em;color:var(--accent-color);text-shadow:0 0 15px var(--accent-color);}
    p {margin-top:8px;opacity:0.9;font-size:0.9em;}

    /* scratch card */
    #scratch-container {
      position:relative;width:260px;height:150px;
      border-radius:15px;margin:20px auto;
    }
    #scratch-canvas {
      position:absolute;top:0;left:0;width:100%;height:100%;
      border-radius:15px;z-index:2;cursor:crosshair;
    }
    #reward {
      width:100%;height:100%;
      background:linear-gradient(135deg,#00e0ff,#ff00f7);
      display:flex;justify-content:center;align-items:center;
      border-radius:15px;color:#fff;font-size:2.5em;font-weight:bold;
      text-shadow:0 0 15px #fff,0 0 15px var(--accent-color);
      position:absolute;z-index:1;
    }

    .action-button {
      width:100%;padding:12px;border:none;border-radius:12px;
      font-size:1.1em;font-weight:700;
      color:#000;cursor:pointer;transition:all 0.3s ease;
      background:linear-gradient(90deg,var(--primary-color),var(--secondary-color));
      box-shadow:0 3px 10px rgba(0,0,0,0.4);
      margin-top:10px;
    }
    .action-button:disabled {opacity:0.5;cursor:not-allowed;}
    .action-button:hover {transform:scale(1.03);}

    #telegram-grid {
      display:grid;grid-template-columns:repeat(2,1fr);
      gap:12px;width:100%;
    }
    .tg-button {
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      gap:5px;padding:12px 8px;min-height:90px;
      font-size:0.8em;font-weight:600;
      color:#fff;background:linear-gradient(135deg,#ff00f7,#00e0ff);
      border:none;border-radius:12px;
      transition:all 0.3s ease;
      box-shadow:0 4px 12px rgba(0,0,0,0.35);
    }
    .tg-button:hover {transform:scale(1.05);}
    .tg-button.joined {background:var(--success-color);}
    .tg-icon svg {width:25px;height:25px;fill:currentColor;}

    #progress-bar-container {
      width:100%;height:10px;background:rgba(255,255,255,0.1);
      border-radius:6px;margin:18px 0;overflow:hidden;
    }
    #progress-bar {width:0%;height:100%;background:var(--accent-color);transition:width 0.7s ease;}

    /* popups */
    .popup-overlay {
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.7);backdrop-filter:blur(8px);
      z-index:100;display:flex;justify-content:center;align-items:center;
      opacity:0;visibility:hidden;transition:all 0.4s ease;
    }
    .popup-overlay.active {opacity:1;visibility:visible;}
    .popup {
      background:var(--card-bg);border:2px solid var(--border-color);
      padding:25px;border-radius:15px;width:90%;max-width:360px;
      text-align:center;transform:scale(0.8);transition:transform 0.4s;
    }
    .popup-overlay.active .popup {transform:scale(1);}
    #popup-amount {font-size:2.2em;font-weight:700;color:var(--accent-color);margin:10px 0;}
    #congrats-icon {font-size:4em;color:var(--accent-color);margin-bottom:10px;}
  </style>
</head>
<body>
  <div class="container">
    <!-- Scratch Page -->
    <div id="scratch-page" class="page active">
      <h1>King Rewards</h1>
      <p>Scratch the gift card to reveal your prize!</p>
      <div id="scratch-container">
        <div id="reward">â‚¹<span id="amount-won"></span></div>
        <canvas id="scratch-canvas" width="260" height="150"></canvas>
      </div>
      <button id="claim-button-1" class="action-button" disabled>Claim Prize</button>
    </div>

    <!-- Claim Page -->
    <div id="claim-page" class="page">
      <h2>ðŸŽ‰ You've Won</h2>
      <div id="won-amount-display">â‚¹0</div>
      <p>Join all channels to unlock the final claim!</p>
      <div id="telegram-grid"></div>
      <div id="progress-bar-container"><div id="progress-bar"></div></div>
      <button id="claim-upi-button" class="action-button" disabled>Claim Prize</button>
    </div>
  </div>

  <!-- UPI Input Popup -->
  <div id="upi-popup-overlay" class="popup-overlay">
    <div class="popup">
      <h3>Final Step!</h3>
      <div id="popup-amount">â‚¹0</div>
      <p>Enter your UPI ID to receive your reward.</p>
      <input type="text" id="upi-input" placeholder="your.name@upi" style="width:100%;padding:12px;border-radius:8px;text-align:center;">
      <button id="submit-upi-button" class="action-button">Send Reward</button>
    </div>
  </div>

  <!-- Congrats Popup -->
  <div id="congrats-popup-overlay" class="popup-overlay">
    <div class="popup">
      <div id="congrats-icon">âœ¨</div>
      <h3 id="congrats-message">Congratulations!</h3>
      <p>Your reward is on its way! Redirectingâ€¦</p>
      <button id="ok-button" class="action-button">OK</button>
    </div>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const permanentTelegramLink = "https://t.me/+F8KW46MMXxFiYzQ1";
  let finalAmount = Math.floor(Math.random()*401)+100;
  document.getElementById("amount-won").textContent = finalAmount;
  const canvas=document.getElementById("scratch-canvas");
  const ctx=canvas.getContext("2d",{willReadFrequently:true});
  const claimBtn=document.getElementById("claim-button-1");
  const claimUpiBtn=document.getElementById("claim-upi-button");

  // scratch
  function setupCanvas(){
    const g=ctx.createLinearGradient(0,0,canvas.width,canvas.height);
    g.addColorStop(0,"#ff00f7");g.addColorStop(1,"#00e0ff");
    ctx.fillStyle=g;ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.globalCompositeOperation="destination-out";
  }
  setupCanvas();

  let isDrawing=false,lastPoint,scratchChecked=false;
  function getPos(e){const r=canvas.getBoundingClientRect();return{x:(e.clientX||e.touches[0].clientX-r.left)*(canvas.width/r.width),y:(e.clientY||e.touches[0].clientY-r.top)*(canvas.height/r.height)}}
  function scratch(p){let d=Math.hypot(p.x-lastPoint.x,p.y-lastPoint.y),a=Math.atan2(p.y-lastPoint.y,p.x-lastPoint.x);for(let i=0;i<d;i++){const x=lastPoint.x+Math.cos(a)*i,y=lastPoint.y+Math.sin(a)*i;ctx.beginPath();ctx.arc(x,y,20,0,2*Math.PI);ctx.fill();}lastPoint=p;checkScratch();}
  function checkScratch(){if(scratchChecked)return;let t=ctx.getImageData(0,0,canvas.width,canvas.height),n=0;for(let i=3;i<t.data.length;i+=4)if(t.data[i]<128)n++;if(n/(canvas.width*canvas.height)*100>55){scratchChecked=true;canvas.style.opacity="0";claimBtn.disabled=false;}}
  canvas.addEventListener("mousedown",e=>{isDrawing=true;lastPoint=getPos(e)});canvas.addEventListener("mousemove",e=>{if(isDrawing)scratch(getPos(e))});canvas.addEventListener("mouseup",()=>isDrawing=false);
  canvas.addEventListener("touchstart",e=>{isDrawing=true;lastPoint=getPos(e)},{passive:false});
  canvas.addEventListener("touchmove",e=>{if(isDrawing){e.preventDefault();scratch(getPos(e));}},{passive:false});
  canvas.addEventListener("touchend",()=>isDrawing=false);

  function showPage(id){document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));document.getElementById(id).classList.add("active");}
  claimBtn.addEventListener("click",()=>{showPage("claim-page");document.getElementById("won-amount-display").textContent=`â‚¹${finalAmount}`;claimUpiBtn.textContent=`Claim â‚¹${finalAmount}`;});

  // channels
  const channels=[
    {name:"Join",link:"https://t.me/NobiCreator"},
    {name:"Join",link:"https://t.me/KING0CHANNEL"},
    {name:"Join",link:"https://t.me/LINKPR0MOTION"},
    {name:"Join",link:"https://t.me/KING_BOT_UPDATE"},
    {name:"Join",link:"https://t.me/LINK_KI_HAWELII"},
    {name:"Join",link:"https://t.me/+mx7J4OwQmbc4ZGQ1"},
  ];
  const grid=document.getElementById("telegram-grid");let joined=0;
  channels.forEach(ch=>{
    const btn=document.createElement("button");
    btn.className="tg-button";
    btn.innerHTML=`<div class="tg-icon"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.58c-.28 1.13-1.04 1.4-1.74 .88l-4.98-3.65l-2.35 2.25c-.24.24-.45.44-.8.44z"></svg></div><span>${ch.name}</span>`;
    btn.onclick=()=>{window.open(ch.link,"_blank");setTimeout(()=>{btn.classList.add("joined");btn.innerHTML="âœ… Joined";joined++;document.getElementById("progress-bar").style.width=`${(joined/channels.length)*100}%`;if(joined===channels.length)claimUpiBtn.disabled=false;},2000);}
    grid.appendChild(btn);
  });

  // UPI claim
  const upiPopup=document.getElementById("upi-popup-overlay");
  const congratsPopup=document.getElementById("congrats-popup-overlay");
  claimUpiBtn.addEventListener("click",()=>{upiPopup.classList.add("active");document.getElementById("popup-amount").textContent=`â‚¹${finalAmount}`;});
  document.getElementById("submit-upi-button").addEventListener("click",()=>{
    const upi=document.getElementById("upi-input").value;
    if(!upi.includes("@")) return alert("Enter valid UPI ID");
    upiPopup.classList.remove("active");
    document.getElementById("congrats-message").innerHTML=`ðŸŽ‰ Congratulations!<br>You will receive â‚¹${finalAmount}`;
    congratsPopup.classList.add("active");
    setTimeout(()=>{window.location.href=permanentTelegramLink;},5000);
    document.getElementById("ok-button").onclick=()=>{window.location.href=permanentTelegramLink;};
  });
});
</script>
</body>
</html>